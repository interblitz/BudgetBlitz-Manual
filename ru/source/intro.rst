Как устроено приложение
=======================

Учет денежных средств
---------------------

Все движения денежных средств программа учитывает при помощи операций (финансовых транзакций). Каждая операция содержит
четыре аналитики: статья (категория), проект, плательщик (получатель) и персона. Операции могут быть
фактическими или плановыми, разовыми или постоянными. Постоянные операции повторяются с заданной периодичностью, как правило
такие операции являются плановыми, но также могут быть и фактическими.

Любую операцию можно разбить на несколько подопераций, такая операция называется сплитом, см :term:`сплит`.

Структура справочников
----------------------

Операции принадлежат определенному счету. Это может быть банковский счет, счет с электронными деньгами, наличные в портмоне,
или что-то другое. Каждый счет имеет свою валюту, которая может отличаться от валюты операции.

В свою очередь, все счета разбиты по портфелям. Каждый портфель также имеет свою валюту, которая может отличаться от валюты счета.

Но это еще не все. Портфели разбиты по типам портфелям. Тип портфеля можно считать аналогом организации.
Если Вы ведете только домашнюю бухгалтерию, то у Вас будет только один тип портфеля --- персональный. Если Вы
дополнительно ведете учет в организации, то два --- персональный и малый бизнес. В некоторых случаях типов
портфелей может быть и больше.

Статьи, контрагенты, проекты и персоны привязаны к типу портфеля. Схематично все справочники можно представить на рисунке:

.. image:: images/directories_structure_ru.png
  :width: 75%
  :align: center

Любой справочник можно отредактировать. Например, можно добавить валюту, статью и т.п. Нет никаких ограничений!

Отличие между плательщиками (получателями) и персонами
------------------------------------------------------

Под плательщиками и получателями в программе понимается вторая сторона в денежной операции. Часто это сторону называют
контрагентом. Без контрагента операции не может быть (за исключением перевода между своими счетами). Если Вы даете, например,
ребенку некую сумму денег, то ребенок является контрагентом и должен быть занесен в справочник плательщиков / получателей.

Персоны, а также категории (статьи) и проекты являются расшифровкой операции. Так например, если Вы покупаете, одежду для
ребенка в магазине, то контрагентом является магазин, а ребенок в этой операции --- персоной.

Контрагенты и персоны можно связать между собой. Для этого в карточке контрагента можно выбрать конкретную персону. Тогда,
при выборе контрагента, в операцию также будет попадать и указанная персона. Например, ребенок будет и контрагентом и персоной.

Настроив учет таким образом можно увидеть, сколько именно Вы потратили денег на содержание ребенка (аналитика по персоне),
и какую именно сумму при этом отдали деньгами (аналитика по контрагенту).
