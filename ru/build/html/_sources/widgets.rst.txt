.. include:: termins.rst
.. _chapter_widgets:

Виджеты и шаблоны
=================

Виджеты
-------

|бб| содержит удобный виджет для отображения фактических остатков, оборотов и быстрого создания новой операции.

.. image:: images/widget-480.png
  :width: 25%
  :align: center

Виджет доступен в различных размерах, 1x1, 1x2 и 1x4 ячейки. Оформление виджета совпадает с темой приложения.

Благодаря гибким настройкам виджет можно использовать не только как сводку, но и как краткий отчет или шаблон
новой операции. Примеры будут рассмотрены ниже.

.. image:: images/widgets-005-widget-available.png
  :width: 25%
.. image:: images/widgets-010-widget-settings-open.png
  :width: 25%
.. image:: images/widgets-020-widget-settings.png
  :width: 25%

После создания в виджете отображаются текущий остаток и движения денежных средств в основной валюте за текущий день.
Для изменения этих настроек служит кнопка |button_settings|.

В разделе |section_view| можно задать основные параметры виджета.

|property_name| удобно использовать, если на экран выведено несколько виджетов. При желании можно оставить это поле
пустым.

|property_portfolio_types|, |property_portfolios| и |property_accounts| служат для базового ограничения отображаемой в
виджете информации. Можно указать один из параметров или их комбинацию. В разных экземплярах виджета могут использоваться
разные ограничения. Так, например, на экран можно вывести два виджета, один будет показывать информацию по одному счету,
другой --- по другому.

|property_show_balance|  служит для включения и отключения расчета баланса, также можно конкретизировать как именно
рассчитывать баланс, с учетом кредитного лимита или без. По умолчанию кредитный лимит не учитывается в балансе, т.е. для
кредитных карт отображается отрицательный остаток.

.. image:: images/widgets-030-widget-settings-2.png
  :width: 25%
.. image:: images/widgets-040-widget-settings-apply.png
  :width: 25%

Использование виджетов в качестве шаблонов операций
---------------------------------------------------

Виджет содержит кнопку |button_new_transaction|. Эта кнопка доступна после того, как в настройках будет указан счет для
создания новых операций. При желании можно указать сумму новой операции, которая будет автоматически установлена
при открытии карточки новой операции.

Также в новую операцию будут скопированы значения фильтров.

Таким образом, задав счет, сумму и фильтры, возможно использовать виджет для создания новой операции по шаблону. Все
поля новой операции будут сразу заполнены.

.. note:: Использование виджетов для создания новых операций по шаблону доступно в версии Pro. В версии Free доступно создание новых операций без заполнения по шаблону.

Использование виджетов в качестве отчетов
-----------------------------------------

Гибкие настройки позволяют использовать виджеты в качестве отчетов с заранее сохраненными настройками. Для этого
служат параметры расположенные в разделе |section_filter|.

.. note:: Использование виджетов в качестве отчетов доступно в версии Pro

Пример использования виджета в качестве отчета
----------------------------------------------

Рассмотрим в качестве примера настройку виджета для отображения расходов на общественный транспорт в течение текущего месяца.
Откроем настройки виджета и зададим название |value_public_transport|.

.. image:: images/widgets-050-widget-example-set-name.png
  :width: 25%
.. image:: images/widgets-060-widget-example-select-period.png
  :width: 25%
.. image:: images/widgets-070-widget-example-select-period-apply.png
  :width: 25%

Общее количество потраченных денежных средств на общественный транспорт с начала ведения учета нас не интересует,
поэтому отключим отображение баланса.

В качестве периода выберем текущий месяц.

.. image:: images/widgets-080-widget-example-select-budget-item.png
  :width: 25%
.. image:: images/widgets-090-widget-example-select-budget-item-apply.png
  :width: 25%
.. image:: images/widgets-100-widget-example-settings-apply.png
  :width: 25%

В настройках фильтра зададим статью |item_category_public_transport| и сохраним настройку.

.. image:: images/widgets-110-widget-example.png
  :width: 25%

Теперь виджет отображает движения только по статье |item_category_public_transport| за текущий месяц, мы видим
конкретную сумму расходов и два счета, с которых оплачивался транспорт.

Пример использования виджета в качестве шаблона
-----------------------------------------------

Теперь изменим настройки виджета так, чтобы мы могли не только видеть расходы, но и быстро их создавать. Для
этого снова откроем настройки.

.. image:: images/widgets-120-widget-example-select-account.png
  :width: 25%
.. image:: images/widgets-140-widget-example-select-amount.png
  :width: 25%
.. image:: images/widgets-150-widget-example-select-amount-value.png
  :width: 25%

Зададим счет, с которого чаще всего будет происходить оплата транспорта. После этого укажем сумму, которая будет
подставлена в новую операцию.

.. image:: images/widgets-160-widget-example-select-amount-value-2.png
  :width: 25%
.. image:: images/widgets-170-widget-example-settings-apply.png
  :width: 25%
.. image:: images/widgets-180-widget-example-transaction-new.png
  :width: 25%

Сохраним настройки. Теперь в виджете появилась кнопка добавления новой операции.

.. image:: images/widgets-190-widget-example-transaction.png
  :width: 25%

Добавляем новую операцию из виджета. Видно, что в новой операции автоматически заполнились счета, сумма и статья. Осталось
только сохранить новую операцию.

Аналогичным образом можно задать контрагентов, проекты и персоны, которые будут подставлены в новую операцию. Для каждого
шаблона следует создать свой виджет.
