

<!doctype html>

<html lang="ru">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Интеграция со сторонними приложениями &#8212; Документация Блиц Бюджет 2.7</title>
    <link rel="stylesheet" type="text/css" href="_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="_static/bizstyle.css" />
    <link rel="stylesheet" type="text/css" href="_static/bbstyle.css" />
    
    <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/doctools.js"></script>
    <script src="_static/translations.js"></script>
    <script src="_static/bizstyle.js"></script>
    <link rel="author" title="Об этих документах" href="about.html" />
    <link rel="index" title="Алфавитный указатель" href="genindex.html" />
    <link rel="search" title="Поиск" href="search.html" />
    <link rel="next" title="Отличия между версиями" href="versions.html" />
    <link rel="prev" title="Удаленный доступ" href="remote-access.html" />

    <meta name="viewport" content="width=device-width,initial-scale=1.0" />
    <!--[if lt IE 9]>
    <script src="_static/css3-mediaqueries.js"></script>
    <![endif]-->
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-17679631-2', 'auto');
  ga('send', 'pageview');

</script>

  </head><body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Навигация</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="Алфавитный указатель"
             accesskey="I">указатель</a></li>
        <li class="right" >
          <a href="versions.html" title="Отличия между версиями"
             accesskey="N">вперёд</a> |</li>
        <li class="right" >
          <a href="remote-access.html" title="Удаленный доступ"
             accesskey="P">назад</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">Документация Блиц Бюджет 2.7</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">Интеграция со сторонними приложениями</a></li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="chapter-api">
<span id="id1"></span><h1>Интеграция со сторонними приложениями<a class="headerlink" href="#chapter-api" title="Ссылка на этот заголовок">¶</a></h1>
<p>Блиц Бюджет для Android можно интегрировать с другими приложениями. Например, можно совместить приложение с голосовым
ассистентом и просто надиктовывать операции или автоматизировать создание или заполнение новых операций при помощи
приложения <a class="reference external" href="https://play.google.com/store/apps/details?id=net.dinglisch.android.taskerm">Tasker</a>.</p>
<div class="section" id="id2">
<h2>Создание операций из текстовой строки<a class="headerlink" href="#id2" title="Ссылка на этот заголовок">¶</a></h2>
<p>Чтобы создать новую операцию в Блиц Бюджет для Android достаточно отправить широковещательный интент. Получив такой
интент, приложение проанализирует сообщение и создаст новую операцию по алгоритму, аналогичному распознавания SMS
и push-уведомлений.</p>
<p>Параметры интента:</p>
<p>Class = <span class="bbvar">biz.interblitz.intent.CONVERT_TEXT_TO_NEW_TRANSACTION</span></p>
<p>Extras:</p>
<ol class="arabic simple">
<li><p><span class="bbvar">timestampMillis</span>: Тип long, дата и время новой операции в миллисекундах. Значение может быть не указано, тогда используются текущие дата и время.</p></li>
<li><p><span class="bbvar">address</span>: Тип String, адресат сообщения, может быть не указан.</p></li>
<li><p><span class="bbvar">message</span>: Тип String, текстовое сообщение, из которого приложение создаст новую операцию. Сообщение по своей структуре должно быть аналогично SMS. Обязательный параметр.</p></li>
</ol>
</div>
<div class="section" id="rest-api">
<span id="sub-chapter-rest-api"></span><h2>REST API<a class="headerlink" href="#rest-api" title="Ссылка на этот заголовок">¶</a></h2>
<p>Блиц Бюджет для Android поддерживает <a class="reference external" href="https://github.com/interblitz/BudgetBlitz-Api">REST API</a>. API позволяет создавать новые объекты, справочники и операции, а также редактировать и удалять существующие. Используя API
можно создавать свои дополнения и приложения.</p>
<p>Для работы с <a class="reference external" href="https://github.com/interblitz/BudgetBlitz-Api">REST API</a> и просмотра документации необходимо включить удаленный доступ, см. <a class="reference internal" href="remote-access.html#chapter-remote-access"><span class="std std-ref">Удаленный доступ</span></a>.
Документация к API доступна через <a class="reference external" href="https://interblitz.github.io/BudgetBlitz-Api/swagger/">Swagger</a>. После загрузки страницы в адресной строке <a class="reference external" href="https://interblitz.github.io/BudgetBlitz-Api/swagger/">Swagger</a> укажите <a class="reference external" href="http://[server]:[port]/api/v1/docs.json">http://[server]:[port]/api/v1/docs.json</a>.
В качестве сервера (server) и порта (port) необходимо указать значения, которые выводятся при включении удаленного доступа.</p>
<p>Примеры приложений можно посмотреть на <a class="reference external" href="https://github.com/interblitz/BudgetBlitz-Api">github.com</a>. В примерах также нужно указать адрес к Блиц Бюджет для Android в виде <a class="reference external" href="http://[server]:[port">http://[server]:[port</a>].</p>
</div>
<div class="section" id="intents-api">
<h2>Intents API<a class="headerlink" href="#intents-api" title="Ссылка на этот заголовок">¶</a></h2>
<p>Помимо простого API для создания операций из текста Блиц Бюджет для Android предоставляет расширенный Intents API.
Intents API  состоит из двух частей, событий и запросов данных,.и построен на базе REST API.
По умолчанию Intents API выключен. В настройках можно указать, какая часть API должна быть включена.</p>
<div class="section" id="intents-api-1">
<h3>Intents API: Часть 1, События<a class="headerlink" href="#intents-api-1" title="Ссылка на этот заголовок">¶</a></h3>
<p>События возникают при записи элементов справочников и операций. При возникновении события Блиц Бюджет для Android отправляет интент тем пакетам,
которые указаны в настройках. В интенте передается:</p>
<p>Action = <span class="bbvar">{biz.interblitz.budget{free/pro}.api.event.ITEM_ONCHANGE</span></p>
<p>Extras:</p>
<ol class="arabic simple">
<li><p><span class="bbvar">collection</span> - наименование коллекции, для которой произошло событие</p></li>
<li><p><span class="bbvar">id</span> - идентификатор объекта, для которого произошло событие</p></li>
</ol>
<p>При импорте уведомлений в Extras дополнительно передаются</p>
<ol class="arabic simple">
<li><p><span class="bbvar">notification</span> - текст уведомления</p></li>
<li><p><span class="bbvar">address</span> - адрес уведомления (номер телефона или наименование пакета)</p></li>
<li><p><span class="bbvar">amount</span> - сумма операции</p></li>
<li><p><span class="bbvar">currency</span> - валюта операции</p></li>
</ol>
<p>Для получения дополнительных данных, которых нет в интенте, следует отправить запрос.</p>
</div>
<div class="section" id="intents-api-2">
<h3>Intents API: Часть 2, Запросы<a class="headerlink" href="#intents-api-2" title="Ссылка на этот заголовок">¶</a></h3>
<p>Для запроса данных следует отправить Intent:</p>
<p>Class = <span class="bbvar">biz.interblitz.service.ApiReceiver</span></p>
<p>Action = <span class="bbvar">{biz.interblitz.budget{free/pro}.api.request</span></p>
<p>Extras:</p>
<ol class="arabic simple">
<li><p><span class="bbvar">method</span> - одно из значений: GET, POST, DELETE</p></li>
<li><p><span class="bbvar">path</span> - путь к данным</p></li>
<li><p><span class="bbvar">body</span> - данные в формате JSON</p></li>
<li><p><span class="bbvar">package</span> - полное имя пакета, которому следует вернуть ответ, если не указано - ответ не будет возвращен</p></li>
<li><p><span class="bbvar">class</span> - класс пакета, которые примет ответ, можно не указывать.</p></li>
</ol>
<p>Также в Extras можно указать любые дополнительные данные. Все заданные в запросе данные Extras вернутся обратно  в ответе.</p>
<p>В ответ на запрос отправляется Intent:</p>
<p>Action = <span class="bbvar">{biz.interblitz.budget{free/pro}.api.response</span></p>
<p>Extras:</p>
<ol class="arabic simple">
<li><p><span class="bbvar">collection</span> - наименование коллекции, для которой отправляется ответ</p></li>
<li><p><span class="bbvar">response</span> - ответ в формате JSON</p></li>
</ol>
<p>Параметры <span class="bbvar">method</span>, <span class="bbvar">path</span>, <span class="bbvar">body</span>, <span class="bbvar">collection</span>, <span class="bbvar">response</span> соответствуют REST API. Документация к ним доступна через <a class="reference external" href="https://interblitz.github.io/BudgetBlitz-Api/swagger/">Swagger</a>.
Подробней см. <a class="reference internal" href="#sub-chapter-rest-api"><span class="std std-ref">REST API</span></a>.</p>
</div>
</div>
</div>


            <div class="clearer"></div>
          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <div>
    <h3><a href="index.html">Table of Contents</a></h3>
    <ul>
<li><a class="reference internal" href="#">Интеграция со сторонними приложениями</a><ul>
<li><a class="reference internal" href="#id2">Создание операций из текстовой строки</a></li>
<li><a class="reference internal" href="#rest-api">REST API</a></li>
<li><a class="reference internal" href="#intents-api">Intents API</a><ul>
<li><a class="reference internal" href="#intents-api-1">Intents API: Часть 1, События</a></li>
<li><a class="reference internal" href="#intents-api-2">Intents API: Часть 2, Запросы</a></li>
</ul>
</li>
</ul>
</li>
</ul>

  </div>
  <div>
    <h4>Предыдущий раздел</h4>
    <p class="topless"><a href="remote-access.html"
                          title="предыдущая глава">Удаленный доступ</a></p>
  </div>
  <div>
    <h4>Следующий раздел</h4>
    <p class="topless"><a href="versions.html"
                          title="следующая глава">Отличия между версиями</a></p>
  </div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Быстрый поиск</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Искать" />
    </form>
    </div>
</div>
<script>$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Навигация</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="Алфавитный указатель"
             >указатель</a></li>
        <li class="right" >
          <a href="versions.html" title="Отличия между версиями"
             >вперёд</a> |</li>
        <li class="right" >
          <a href="remote-access.html" title="Удаленный доступ"
             >назад</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">Документация Блиц Бюджет 2.7</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">Интеграция со сторонними приложениями</a></li> 
      </ul>
    </div>

    <div class="footer" role="contentinfo">
        &#169; Copyright 2017 - 2021, Interblitz.
      Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 4.5.0.
    </div>
<div class="footer">This page uses <a href="http://analytics.google.com/">
Google Analytics</a> to collect statistics. You can disable it by blocking
the JavaScript coming from www.google-analytics.com.
</div>

  </body>
</html>